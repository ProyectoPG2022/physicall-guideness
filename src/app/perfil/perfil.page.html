<ion-header>
  <ion-toolbar>
    <ion-title>Perfil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form
    *ngIf="user$$ | async as user ; else logout"
    (ngSubmit)="onSaveUser(profileForm.value)"
    [formGroup]="profileForm"
  >
    <ion-card>
      <ion-card-header>
        <!--img src="https://picsum.photos/id/113/150/150" /-->
        <div class="label bottom">
          <p id="changePhoto">Cambiar</p>
          <img [src]="currentImage" (click)="imageProfile.click()" />
          <input
            hidden
            type="file"
            #imageProfile
            formControlName="photo"
            (change)="handleImage($event)"
          />
        </div>
      </ion-card-header>
      <ion-card-content>
        <ion-item>
          <ion-label>Nombre de usuario:</ion-label>
          <ion-input placeholder="Name" formControlName="username"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label>Correo electronico:</ion-label>
          <ion-input placeholder="Email" formControlName="email"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label>Biografía:</ion-label>
          <ion-textarea
            placeholder="Biografía"
            formControlName="biografia"
          ></ion-textarea>
        </ion-item>

        <!--ion-item>
          <ion-label>Correo electronico</ion-label>
          <input matInput placeholder="Email" formControlName="" />
        </ion-item-->
        <div class="buttonsContainer">
          <ion-button class="button" type="submit">Guardar cambios</ion-button>
          <ion-button class="button" (click)="onLogOut()">Cerrar sesión</ion-button>
        </div>
        
      </ion-card-content>
    </ion-card>
  </form>

  <div *ngIf="userType =='Viajero'">
    <p id="places">Lugares visitados</p>
    <div class="row m-2 cardContainer">
      <div     
        *ngFor="let sitio of userPlaces"
        class="card col-4"
        style="width: 18rem;"
      >
        <ion-img src="./assets/paisaje.jpg" class="card-img-top" styles="width:100%"alt="..."></ion-img>
        <div class="card-body">
          <h5 class="card-title">{{sitio.name}}</h5>
          <p class="card-text">
            Some quick example text to build on the card title and make up the
            bulk of the card's content.
          </p>
          <a href="#" class="btn btn-primary">Go somewhere</a>
        </div>
      </div>
    </div>
  </div>
  <ng-template #logout>
    <div id="template" class="d-flex">
      <ion-img src="/assets/islita.png" alt="Playa"></ion-img>
      <p id="message">
        Vaya, parece que no has iniciado sesión, vamos a cambiar eso!!
      </p>
      <ion-row class="m-2">
        <ion-col>
          <ion-button id="margin-button" routerLink="/login"
            >Iniciar sesión</ion-button
          >
        </ion-col>
      </ion-row>
    </div>
  </ng-template>
</ion-content>
